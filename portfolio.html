<!-- This HTML file provides a simple example of a portfolio page. It contains a header, a few sections, and a few charts. -->
<!-- It works with the three css files in this folder: example1.css, example2.css and example3.css. -->
<!-- The HTML file defines the structure of the page, and the CSS files define how it looks. -->
<!-- The CSS examples are all designed to work with this page. Try swapping them out on line 29 and see what happens. -->

<!-- Take a look around and make your own copy to adapt for your own use. -->

<!-- This is a comment -->
<!-- Comments are not displayed in the browser -->
<!-- They can be used to leave notes in the code -->

<!DOCTYPE html>
<html> 
    <!-- HTML is heirarchial: tags like this define elements on the page. 
    Each tag does something different. For example:
        - The <html> tag defines the whole document.
        - The <h1> tag defines a large heading
        - The <p> tag defines a paragraph
        - Tags appear as an opening <div> and closing </div> pair
    -->

<head>    
    <!-- The head tag links to resources our page needs and defines information about it. Tags in the <head> aren't displayed on the page. -->

    <!-- This is a link to a stylesheet which contains rules about how each element on the page should be defined-->
    <!-- Try swapping example1.css to another, and take a look at example1.css to see if you understand it-->
    <link rel="stylesheet" type="text/css" href="css/portfolio-style-fixed.css">
    <title>My Portfolio</title> <!-- The title displayed in the browser tab, not on the page itself -->

    <!-- This is a link to the vega-lite which we're using to make graphs -->
<script src="https://cdn.jsdelivr.net/npm/vega@6"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

    <style>
        #chartGrid {
            display: flex;
        }
        
    </style>
</head>

<body> 
<!-- The body tag contains the elements that visitors to our page will see. -->
    <h1 class="big" style="margin-bottom: 0px;"> <!-- We have added a class to the header called "big" which we can use to style it in the CSS -->
        <!-- This is a header, it is the largest text on the page -->
        Alonso Quezada Portfolio
    </h1>
    <p style="margin-top: 0px; color: darkblue">
        <!-- we're setting the margin to 0px so the header and authour name are close together -->
        <a href="https://www.linkedin.com/in/alonso-quezada-rubio/">LinkedIn</a> | <a
            href="https://github.com/alonsoquezadar">GitHub</a>
    </p>
    <h3 class="small"> <!-- We have added a class to the header called "small" which we can use to style it in the CSS -->
        This webpage acts as my Portfolio Tasks 2025 for PP434 - Automated Data Visualisation for Policymaking course at LSE
    </h3>

    <!-- We're organising the page into sections, with each section containing a chart, title and a description -->
<section>
    <div class="chart-description">
        <h2>CC1: A basic chart</h2>
        <p>
            Two basic charts about debt in the UK 
        </p>
    </div>
    <figure id="Location1"></figure>
    <figure id="Location3"></figure>
</section>

<section>
    <div class="chart-description">
        <h2>CC2: My own visualisations</h2>
        <p> 
            This section contains the CC2 graphs created on the Economics Observatory Data Hub 
        </p>
    </div>
    <figure id="Location4"></figure>
    <figure id="Location5"></figure>
</section>

<section>
    <div class="chart-description">
        <h2>CC3: Does Chile have a crucial role in the global energy transition?</h2>
        <p> 
            Chile's strategic mineral reserves position it as a <strong>critical supplier for global energy transition</strong>, controlling significant copper and lithium resources essential for clean technologies.
            Copper mine production by country shows Chile as the <strong>world's largest mined copper producer</strong> (~5M tonnes a year, representing 21% of global production in 2025).
        </p>
    </div>
    <figure id="Location6"></figure>
    <p> 
        Furthermore, lithium production by country positioned Chile as the <strong>second-largest lithium producer</strong> (25% of global production in 2023)
    </p>
    <figure id="Location7"></figure>
    <p>
        <strong>Takeaways:</strong>
        Chile has a crucial role to play in the global energy transition, dominating two critical energy transition minerals, copper for electrical infrastructure and lithium for batteries, <strong>cementing its role as indispensable to global decarbonization efforts.</strong>
    </p>
</section>

<section>
    <div class="chart-description">
        <h2>CC4: Improving a graph </h2>
        <h3>Original Graph</h3>
        <p>
        The original graph uses two tricks to exaggerate Chile's economic performance. First, it shows Chile in isolation—without peer comparisons, any upward trajectory looks impressive. Second, it uses a linear scale, which visually inflates recent growth into a dramatic spike. A logarithmic scale is the proper choice for comparing growth rates, as equal distances represent equal percentage growth. When corrected, Chile's "miracle" looks far more modest.
        </p>
        <img src="https://raw.githubusercontent.com/alonsoquezadar/alonsoquezadar.github.io/main/Plots%20Portfolio/graph%20to%20improve.png" 
             alt="Original Chile GDP per capita graph" 
             style="max-width: 100%; border-radius: 8px; opacity: 0.9;">
        <h3>Replic of the original graph</h3>
        <figure id="Location9"></figure>
        <h3>New graph version</h3>
        <p>
        This chart adds context with four peers. South Korea started poorer than Chile in 1970 yet achieved 12× growth—proving far more dramatic transformations were possible. Argentina, richer in 1970, stagnated at 1.5× growth. Spain and Portugal, with similar democratic transitions, achieved 2.7× growth via EU integration. Chile's 3× growth outpaced Latin America but fell short of Asian tigers and only slightly exceeded Southern Europe.
The improved visualization uses a logarithmic scale, adds peer comparisons and removes distracting imagery.    
        </p>
        <figure id="Location8"></figure>
    </div>
</section>

<section>
    <div class="chart-description">
        <h2>CC5: Accessing data - Scraper and API</h2>
        <figure id="Location10"></figure>
        <h3>World Bank API - Functional Description</h3>
        <p>
            The World Bank API uses the base URL <code>https://api.worldbank.org/v2/</code> followed by the endpoint structure <code>/country/{country_codes}/indicator/{indicator_code}</code>. Country codes are ISO-3 codes separated by semicolons (e.g., <code>WLD;EUU;NAC</code> for World, European Union, and North America). The indicator code specifies which dataset to retrieve (e.g., <code>EG.FEC.RNEW.ZS</code> for renewable energy consumption). Query parameters include <code>format=json</code> for JSON output, <code>per_page</code> to set the number of records, and <code>date</code> for the year range (e.g., <code>1990:2022</code>). The full URL used in the chart is:
        </p>
        <pre><code>https://api.worldbank.org/v2/country/WLD;EUU;NAC;EAS;LCN;SSF/indicator/EG.FEC.RNEW.ZS?format=json&per_page=500&date=1990:2022</code></pre>
        <p>
            Note that the API returns a two-element array where index <code>[0]</code> contains metadata and index <code>[1]</code> contains the actual data, so in Vega-Lite you must use <code>"format": {"property": "[1]"}</code> to extract the data correctly.
        </p>
        <h3>Scraping: Chilean Futbol League</h3>
        <p>
           I scraped Chilean football league data from <a href="https://www.emol.com/especiales/2025/deportes/campeonato-2025/" target="_blank">El Mercurio</a> using BeautifulSoup and pandas, extracting standings and match results, then transformed them into cumulative points datasets for visualization. You can find the Python code <a href="https://colab.research.google.com/drive/1fqLkKWpzL1F61S9sXKgXJpWAkFGD3X4c?usp=sharing" target="_blank">here</a>.
        </p>
        <iframe src="Plots%20Portfolio/tabla_posiciones.html" width="100%" height="650" style="border: none; border-radius: 10px;"></iframe>
        <h3>Graphs: Teams performace</h3>
        <p>
            Coquimbo Unido dominated the 2025 Chilean league, securing the title with 71 points after an extraordinary 19-match winning streak. Universidad Católica (55 pts), O'Higgins (53 pts), and Universidad de Chile (51 pts) are competing for the remaining two Libertadores qualification spots. At the bottom, Deportes Iquique (24 pts) and Unión Española (21 pts) face relegation.
        </p>
        <figure id="Location11"></figure>
        <figure id="Location12"></figure>

    </div>
</section>

<section>
    <div class="chart-description">
        <h2>CC6: Loops - U.S. Labor Market Dashboard</h2>
        <p>
            Six economic indicators from the Federal Reserve (FRED) API, 
            downloaded using Python loops and displayed using a JavaScript loop.
            <a href="https://colab.research.google.com/drive/1JOd2HQS-Td4002XN390JTF5ebWJUgfBb?usp=sharing" target="_blank">View Python code</a>.
        </p>
        <div class="chart-grid-fred">
            <figure id="chart-fred-1"></figure>
            <figure id="chart-fred-2"></figure>
            <figure id="chart-fred-3"></figure>
            <figure id="chart-fred-4"></figure>
            <figure id="chart-fred-5"></figure>
            <figure id="chart-fred-6"></figure>
        </div>
    </div>
</section>

<section>
    <div class="chart-description">
        <h2>CC7: Maps</h2>
        <p>
      Shown below are three electoral maps. First, a choropleth map showing the results of the Scotland General Election 2024 by constituency. 
      Second, a coordinate map describing the seats obtained by each party. Finally, a choropleth map displaying the General Election results in Wales, utilizing Mapbox to enhance data interactivity. 
        </p>
        <figure id="Location13"></figure>
        <figure id="Location14"></figure>
        <iframe 
  src="https://alonsoquezadar.github.io/Plots%20Portfolio/UK_Election/Maps/wales_election_map.html" 
  width="100%" 
  height="800" 
  style="border: none; border-radius: 8px;"
  title="Wales 2024 Election Map">
</iframe>
    </div>
</section>

<section>
    <div class="chart-description">
        <h2>CC8: Big Data</h2> 
        <p>
            This visualization was created using microdata from the Long Run Prices Database (LRPD), specifically item 310315 (bottle of wine 70-75cl). 
            The original dataset contains 136,455 individual price observations collected from 309 shops across 12 UK regions between February 1994 and September 2024. 
            For each month, I calculated summary statistics including the mean, minimum, and maximum prices observed. The data was then sampled at regular intervals to create a cleaner time series while preserving the overall trend. 
            The resulting chart displays the mean price as a line, with the shaded area representing the full price range (minimum to maximum) observed each month.
        </p> 
        <iframe src="Plots%20Portfolio/wine_price_chart_final.html" width="100%" height="1200" style="border: none; border-radius: 16px;" loading="lazy"></iframe>
        <p> Starting from a dataset of 49,070 individual price observations for 30g hand-rolling tobacco packs collected across 12 UK regions between 1996 and 2024, sourced from the Long Run Prices Database (LRPD, Davies 2021), 
            I aggregated the data by year to calculate the annual average price, then computed the year-over-year percentage change for each year — resulting in a simple 29-row dataset with two key metrics: average price (£) and annual change (%),
            which form the basis of this scrollytelling visualization. </p> 
        <iframe src="Plots%20Portfolio/tobacco_price_story_v2.html" width="100%" height="1200" style="border: none; border-radius: 16px;" loading="lazy"></iframe>
 </div>
</section>

<section>
    <div class="chart-description">
        <h2>CC9: Interactive charts</h2>
        <p>
            UK Regional Income & Productivity
        </p>
        <iframe 
  src="https://alonsoquezadar.github.io/Plots%20Portfolio/uk-regional-map-v3.html" 
  width="1000" 
  height="1200" 
  style="border: none; border-radius: 16px;"></iframe>
    </div>
</section>

<section>
    <div class="chart-description">
        <h2>CC9b: Interactive charts Chile</h2>
        <p>
            Chilean Election 2025
        </p>
        <iframe 
  src="https://alonsoquezadar.github.io/Plots%20Portfolio/chile_pres_25_elect_v2.html" 
  width="1000" 
  height="1200" 
  style="border: none; border-radius: 16px;"></iframe>
    </div>
</section>

<section>
    <div class="chart-description">
        <h2>CC9c: Regression analysis</h2>
        <p>
            Life expectancy vs. GDP per capita, 2023. The period life expectancy at birth, in a given year. GDP per capita is adjusted for inflation and differences in living costs between countries.
        </p>
        <p>
            <strong>Model:</strong> Life Expectancy = 23.45 + 11.93 × log₁₀(GDP per capita)<br>
            <strong>R² = 0.736</strong> means that 73.6% of the variation in life expectancy is explained by GDP per capita.<br>
            <strong>Slope:</strong> 11.93 (95% CI: 10.92–12.94, p < 0.001) — a 10× increase in GDP per capita is associated with ~12 additional years of life expectancy.
        </p>
        <figure id="Location15"></figure>
    </div>
</section>

    
    <!-- Do you want to add more sections? -->
        <!-- Try copying pasting the section above -->
        <!-- You'll need to change the id of the figure "<figure id="Location3"... -->
        <!-- ... and add a new variable for the graph spec in the script at the bottom of the page -->


    <!-- This is a script, it's a way to run JavaScript code on the page -->
    <script>
        // This is a comment in JavaScript - it's a different language to HTML and CSS

        let figure_1_spec = "https://raw.githubusercontent.com/alonsoquezadar/alonsoquezadar.github.io/refs/heads/main/Plots%20Portfolio/Global%20total%20debt%20outstanding.json"; // We're storing the URL of the graph we want to display in a variable
        let figure_3_spec = "https://raw.githubusercontent.com/alonsoquezadar/alonsoquezadar.github.io/refs/heads/main/Plots%20Portfolio/Debt%20interest%20payments.json";  // You should have a spec for a graph in this same folder. Just specify its name here, e.g. let figure_1_spec = "chart1.json"
        let figure_4_spec = "https://raw.githubusercontent.com/alonsoquezadar/alonsoquezadar.github.io/refs/heads/main/Plots%20Portfolio/Hours%20work.json";
        let figure_5_spec = "https://raw.githubusercontent.com/alonsoquezadar/alonsoquezadar.github.io/refs/heads/main/Plots%20Portfolio/Real%20GDP.json";
        let figure_6_spec = "https://raw.githubusercontent.com/alonsoquezadar/alonsoquezadar.github.io/refs/heads/main/Plots%20Portfolio/Copper%20production.json";
        let figure_7_spec = "https://raw.githubusercontent.com/alonsoquezadar/alonsoquezadar.github.io/refs/heads/main/Plots%20Portfolio/Lithium%20production%20map.json";
        let figure_8_spec = "https://raw.githubusercontent.com/alonsoquezadar/alonsoquezadar.github.io/refs/heads/main/Plots%20Portfolio/improve-chile-graph.json";
        let figure_9_spec = "https://raw.githubusercontent.com/alonsoquezadar/alonsoquezadar.github.io/refs/heads/main/Plots%20Portfolio/replicate-pinera-plot.json";
        let figure_10_spec = "https://raw.githubusercontent.com/alonsoquezadar/alonsoquezadar.github.io/refs/heads/main/Plots%20Portfolio/renewable-energy-api-graph.json";
        let figure_11_spec = "https://raw.githubusercontent.com/alonsoquezadar/alonsoquezadar.github.io/refs/heads/main/Plots%20Portfolio/chilean-futbol-league.json";
        let figure_12_spec = "https://raw.githubusercontent.com/alonsoquezadar/alonsoquezadar.github.io/refs/heads/main/Plots%20Portfolio/facet-futbol-league.json";
        let figure_13_spec = "https://raw.githubusercontent.com/alonsoquezadar/alonsoquezadar.github.io/refs/heads/main/Plots%20Portfolio/UK_Election/Maps/map-scotland-election-2024.json";
        let figure_14_spec = "https://raw.githubusercontent.com/alonsoquezadar/alonsoquezadar.github.io/refs/heads/main/Plots%20Portfolio/UK_Election/Maps/map-scotland-coordinates-election.json";
        let figure_15_spec = "https://raw.githubusercontent.com/alonsoquezadar/alonsoquezadar.github.io/refs/heads/main/Plots%20Portfolio/loggdp_lifeexp.json"

        
        vegaEmbed('#Location1', figure_1_spec) // We're using the vegaEmbed function to put a graph in the element with id figure_1
        vegaEmbed('#Location3', figure_3_spec)
        vegaEmbed('#Location4', figure_4_spec)
        vegaEmbed('#Location5', figure_5_spec)
        vegaEmbed('#Location6', figure_6_spec)
        vegaEmbed('#Location7', figure_7_spec)
        vegaEmbed('#Location8', figure_8_spec)
        vegaEmbed('#Location9', figure_9_spec)
        vegaEmbed('#Location10', figure_10_spec)
        vegaEmbed('#Location11', figure_11_spec)
        vegaEmbed('#Location12', figure_12_spec)
        vegaEmbed('#Location13', figure_13_spec)
        vegaEmbed('#Location14', figure_14_spec)
        vegaEmbed('#Location15', figure_15_spec)



// ============================================
// CC6: Embed 6 FRED charts using a loop
// ============================================

const fredCharts = [
    "unemployment-rate-p",
    "non-farm-payroll-p",
    "initial-claims-p",
    "job-openings-p",
    "weekly-hours-p",
    "hourly-earning-p"
];

const fredBaseURL = "https://raw.githubusercontent.com/alonsoquezadar/alonsoquezadar.github.io/main/Plots%20Portfolio/FRED%20Loop/Plots";

for (let i = 0; i < fredCharts.length; i++) {
    vegaEmbed(`#chart-fred-${i + 1}`, `${fredBaseURL}/${fredCharts[i]}.json`);
}





        // Do you want to add more graphs?
        // try defining a new variable for figure_3_spec, adding VegaEmbed for Location3, and adding a new section in the HTML
        // e.g. 
        // let figure_3_spec = ...
        // vegaEmbed('#Location3', figure_3_spec)


    </script>

</body>
    
</html>
